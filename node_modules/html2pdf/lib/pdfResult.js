"use strict"

var fs = require("fs");

var method = PDFResult.prototype;

function PDFResult(err, tmpPath) {
    this._err = err;
    this._tmpPath = tmpPath;
}

method.toStream = function() {
	return fs.createReadStream(this._tmpPath);
};

method.toBuffer = function(callback) {
	var buffers = [];
	var buffer;
	var stream = fs.createReadStream(this._tmpPath);

	stream.on('data', function(data) { 
		buffers.push(data); 
	});

	stream.on('end', function() {
		buffer = Buffer.concat(buffers);

		if (typeof callback === "function") { callback(buffer); }
	});
};

method.getTmpPath = function() {
    return this._tmpPath;
};

method.toFile = function(path, callback) {
	var outputStream = fs.createWriteStream(path);
    var operation = fs.createReadStream(this._tmpPath).pipe(outputStream);

	operation.on('close', function() {
		if (typeof callback === "function") { callback(); }
	});
};

module.exports = PDFResult;